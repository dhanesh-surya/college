{% extends 'base.html' %}
{% load static %}

{% block title %}Annual Reports - {{ college_info.name|default:"Chaitanya Science and Arts College" }}{% endblock %}

{% block breadcrumb_items %}
<li class="breadcrumb-item active text-white">Annual Reports</li>
{% endblock %}

{% block content %}
<!-- Hero Section with Bootstrap 5 + Tailwind -->
<section class="tw-relative tw-overflow-hidden tw-py-20 tw-bg-gradient-to-br tw-from-blue-600 tw-via-indigo-700 tw-to-purple-800">
    <!-- Background Pattern -->
    <div class="tw-absolute tw-inset-0 tw-bg-black tw-bg-opacity-20"></div>
    <div class="tw-absolute tw-inset-0" style="background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><defs><pattern id=\"grain\" width=\"100\" height=\"100\" patternUnits=\"userSpaceOnUse\"><circle cx=\"25\" cy=\"25\" r=\"1\" fill=\"white\" opacity=\"0.1\"/><circle cx=\"75\" cy=\"75\" r=\"1\" fill=\"white\" opacity=\"0.1\"/></pattern></defs><rect width=\"100\" height=\"100\" fill=\"url(%23grain)\"/></svg>');"></div>
    
    <div class="container tw-relative tw-z-10">
        <div class="row align-items-center tw-min-h-96">
            <div class="col-lg-8">
                <div class="tw-text-white">
                    <!-- Animated Icon -->
                    <div class="tw-flex tw-items-center tw-mb-6">
                        <div class="tw-bg-white tw-bg-opacity-20 tw-p-4 tw-rounded-full tw-mr-4 tw-animate-bounce">
                            <i class="fas fa-file-alt tw-text-4xl tw-text-yellow-300"></i>
                        </div>
                        <h1 class="tw-text-5xl lg:tw-text-6xl tw-font-bold tw-mb-0 tw-leading-tight">
                            Annual Reports
                        </h1>
                    </div>
                    
                    <p class="tw-text-xl lg:tw-text-2xl tw-mb-8 tw-opacity-90 tw-leading-relaxed">
                        Access our comprehensive annual reports, quality assurance documents, and institutional assessments. 
                        Transparency and accountability are at the core of our educational mission.
                    </p>
                    
                    <!-- Feature Tags -->
                    <div class="tw-flex tw-flex-wrap tw-gap-4 tw-mb-8">
                        <div class="tw-bg-white tw-bg-opacity-20 tw-backdrop-blur-sm tw-px-4 tw-py-2 tw-rounded-full tw-flex tw-items-center">
                            <i class="fas fa-chart-line tw-text-yellow-300 tw-mr-2"></i>
                            <span class="tw-font-medium">Quality Assurance</span>
                        </div>
                        <div class="tw-bg-white tw-bg-opacity-20 tw-backdrop-blur-sm tw-px-4 tw-py-2 tw-rounded-full tw-flex tw-items-center">
                            <i class="fas fa-award tw-text-yellow-300 tw-mr-2"></i>
                            <span class="tw-font-medium">Accreditation</span>
                        </div>
                        <div class="tw-bg-white tw-bg-opacity-20 tw-backdrop-blur-sm tw-px-4 tw-py-2 tw-rounded-full tw-flex tw-items-center">
                            <i class="fas fa-eye tw-text-yellow-300 tw-mr-2"></i>
                            <span class="tw-font-medium">Transparency</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Stats Cards -->
            <div class="col-lg-4">
                <div class="row g-3">
                    <div class="col-6">
                        <div class="tw-bg-white tw-bg-opacity-20 tw-backdrop-blur-sm tw-rounded-2xl tw-p-6 tw-text-center tw-text-white tw-shadow-lg">
                            <div class="tw-text-4xl tw-font-bold tw-mb-2 tw-text-yellow-300">{{ reports|length }}</div>
                            <div class="tw-text-sm tw-opacity-90">Total Reports</div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="tw-bg-white tw-bg-opacity-20 tw-backdrop-blur-sm tw-rounded-2xl tw-p-6 tw-text-center tw-text-white tw-shadow-lg">
                            <div class="tw-text-4xl tw-font-bold tw-mb-2 tw-text-yellow-300">2024</div>
                            <div class="tw-text-sm tw-opacity-90">Latest Year</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Main Content -->
<div class="container tw-py-16">
    <!-- Filter Section -->
    <div class="tw-bg-white tw-rounded-3xl tw-shadow-xl tw-p-8 tw-mb-12 tw-border tw-border-gray-100">
        <div class="text-center tw-mb-8">
            <h3 class="tw-text-3xl tw-font-bold tw-text-gray-800 tw-mb-3">Browse by Report Type</h3>
            <p class="tw-text-gray-600 tw-text-lg">Filter reports by category to find specific documents</p>
        </div>
        
        <div class="tw-flex tw-flex-wrap tw-justify-center tw-gap-3">
            <a href="{% url 'college_website:annual_reports' %}" 
               class="tw-px-6 tw-py-3 tw-rounded-full tw-font-semibold tw-transition-all tw-duration-300 tw-flex tw-items-center {% if not request.GET.type %}tw-bg-gradient-to-r tw-from-blue-600 tw-to-purple-600 tw-text-white tw-shadow-lg{% else %}tw-bg-gray-100 tw-text-gray-700 hover:tw-bg-gray-200{% endif %}">
                <i class="fas fa-th-large tw-mr-2"></i>All Reports
            </a>
            <a href="{% url 'college_website:annual_reports' %}?type=annual" 
               class="tw-px-6 tw-py-3 tw-rounded-full tw-font-semibold tw-transition-all tw-duration-300 tw-flex tw-items-center {% if request.GET.type == 'annual' %}tw-bg-gradient-to-r tw-from-blue-600 tw-to-purple-600 tw-text-white tw-shadow-lg{% else %}tw-bg-gray-100 tw-text-gray-700 hover:tw-bg-gray-200{% endif %}">
                <i class="fas fa-calendar-alt tw-mr-2"></i>Annual Reports
            </a>
            <a href="{% url 'college_website:annual_reports' %}?type=aqar" 
               class="tw-px-6 tw-py-3 tw-rounded-full tw-font-semibold tw-transition-all tw-duration-300 tw-flex tw-items-center {% if request.GET.type == 'aqar' %}tw-bg-gradient-to-r tw-from-blue-600 tw-to-purple-600 tw-text-white tw-shadow-lg{% else %}tw-bg-gray-100 tw-text-gray-700 hover:tw-bg-gray-200{% endif %}">
                <i class="fas fa-chart-bar tw-mr-2"></i>AQAR
            </a>
            <a href="{% url 'college_website:annual_reports' %}?type=naac" 
               class="tw-px-6 tw-py-3 tw-rounded-full tw-font-semibold tw-transition-all tw-duration-300 tw-flex tw-items-center {% if request.GET.type == 'naac' %}tw-bg-gradient-to-r tw-from-blue-600 tw-to-purple-600 tw-text-white tw-shadow-lg{% else %}tw-bg-gray-100 tw-text-gray-700 hover:tw-bg-gray-200{% endif %}">
                <i class="fas fa-star tw-mr-2"></i>NAAC
            </a>
            <a href="{% url 'college_website:annual_reports' %}?type=nirf" 
               class="tw-px-6 tw-py-3 tw-rounded-full tw-font-semibold tw-transition-all tw-duration-300 tw-flex tw-items-center {% if request.GET.type == 'nirf' %}tw-bg-gradient-to-r tw-from-blue-600 tw-to-purple-600 tw-text-white tw-shadow-lg{% else %}tw-bg-gray-100 tw-text-gray-700 hover:tw-bg-gray-200{% endif %}">
                <i class="fas fa-trophy tw-mr-2"></i>NIRF
            </a>
            <a href="{% url 'college_website:annual_reports' %}?type=other" 
               class="tw-px-6 tw-py-3 tw-rounded-full tw-font-semibold tw-transition-all tw-duration-300 tw-flex tw-items-center {% if request.GET.type == 'other' %}tw-bg-gradient-to-r tw-from-blue-600 tw-to-purple-600 tw-text-white tw-shadow-lg{% else %}tw-bg-gray-100 tw-text-gray-700 hover:tw-bg-gray-200{% endif %}">
                <i class="fas fa-file tw-mr-2"></i>Other Reports
            </a>
        </div>
    </div>

    <!-- Reports Grid -->
    {% if reports %}
    <div class="row g-4">
        {% for report in reports %}
        <div class="col-lg-4 col-md-6">
            <div class="card tw-h-full tw-border-0 tw-shadow-lg tw-rounded-2xl tw-overflow-hidden tw-transition-all tw-duration-300 hover:tw-shadow-2xl hover:tw-scale-105">
                <!-- Report Type Badge -->
                <div class="tw-absolute tw-top-4 tw-right-4 tw-z-10">
                    <span class="tw-bg-gradient-to-r tw-from-blue-600 tw-to-purple-600 tw-text-white tw-px-3 tw-py-1 tw-rounded-full tw-text-sm tw-font-semibold tw-shadow-lg">
                        {{ report.get_report_type_display }}
                    </span>
                </div>
                
                <div class="card-body tw-p-6 tw-flex tw-flex-col tw-h-full">
                    <!-- Academic Year Badge -->
                    <div class="tw-bg-gradient-to-r tw-from-green-500 tw-to-blue-600 tw-text-white tw-px-4 tw-py-2 tw-rounded-full tw-text-sm tw-font-semibold tw-inline-block tw-mb-4 tw-w-fit">
                        <i class="fas fa-calendar tw-mr-2"></i>
                        {{ report.academic_year }}
                    </div>
                    
                    <!-- Title -->
                    <h5 class="tw-text-xl tw-font-bold tw-text-gray-800 tw-mb-3 tw-leading-tight">{{ report.title }}</h5>
                    
                    <!-- Description -->
                    {% if report.description %}
                    <p class="tw-text-gray-600 tw-mb-4 tw-leading-relaxed tw-flex-grow">
                        {{ report.description|striptags|truncatewords:20 }}
                    </p>
                    {% endif %}
                    
                    <!-- Meta Information -->
                    <div class="tw-space-y-2 tw-mb-6">
                        {% if report.publish_date %}
                        <div class="tw-flex tw-items-center tw-text-gray-600">
                            <i class="fas fa-calendar-check tw-text-blue-500 tw-w-4 tw-mr-3"></i>
                            <span class="tw-text-sm">Published: {{ report.publish_date|date:"M d, Y" }}</span>
                        </div>
                        {% endif %}
                        
                        {% if report.report_file %}
                        <div class="tw-flex tw-items-center tw-text-gray-600">
                            <i class="fas fa-file-pdf tw-text-red-500 tw-w-4 tw-mr-3"></i>
                            <span class="tw-text-sm">PDF Document</span>
                        </div>
                        {% endif %}
                        
                        {% if report.is_featured %}
                        <div class="tw-flex tw-items-center tw-text-gray-600">
                            <i class="fas fa-star tw-text-yellow-500 tw-w-4 tw-mr-3"></i>
                            <span class="tw-text-sm">Featured Report</span>
                        </div>
                        {% endif %}
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="tw-mt-auto tw-space-y-2">
                        {% if report.report_file %}
                        <a href="{{ report.report_file.url }}" 
                           class="btn tw-w-full tw-bg-gradient-to-r tw-from-red-600 tw-to-pink-500 tw-text-white tw-border-0 tw-rounded-full tw-py-3 tw-font-semibold tw-transition-all tw-duration-300 hover:tw-shadow-lg hover:tw-scale-105"
                           target="_blank">
                            <i class="fas fa-download tw-mr-2"></i>Download PDF
                        </a>
                        {% else %}
                        <div class="tw-text-center tw-py-4 tw-text-gray-500">
                            <i class="fas fa-file-alt tw-text-2xl tw-mb-2"></i>
                            <p class="tw-text-sm">Report document will be available soon</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    
    {% else %}
    <!-- No Reports Message -->
    <div class="tw-text-center tw-py-16">
        <div class="tw-bg-gray-100 tw-w-24 tw-h-24 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-mx-auto tw-mb-6">
            <i class="fas fa-file-alt tw-text-4xl tw-text-gray-400"></i>
        </div>
        <h3 class="tw-text-3xl tw-font-bold tw-text-gray-800 tw-mb-4">No Reports Available</h3>
        <p class="tw-text-xl tw-text-gray-600 tw-mb-8 tw-max-w-2xl tw-mx-auto">
            Annual reports and quality assurance documents are currently being prepared. 
            Please check back soon for the latest institutional reports.
        </p>
        <a href="{% url 'college_website:iqac' %}" class="btn tw-bg-gradient-to-r tw-from-blue-600 tw-to-purple-600 tw-text-white tw-border-0 tw-rounded-full tw-px-8 tw-py-4 tw-text-lg tw-font-semibold tw-transition-all tw-duration-300 hover:tw-shadow-lg hover:tw-scale-105">
            <i class="fas fa-chart-line tw-mr-2"></i>Visit IQAC
        </a>
    </div>
    {% endif %}
</div>

<!-- Call to Action Section -->
<section class="tw-py-16 tw-bg-gradient-to-r tw-from-gray-50 tw-to-blue-50">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h3 class="tw-text-3xl tw-font-bold tw-text-gray-800 tw-mb-4">Need More Information?</h3>
                <p class="tw-text-lg tw-text-gray-600 tw-mb-0">
                    For additional reports, documents, or institutional information, 
                    please contact our IQAC department or visit our main IQAC page.
                </p>
            </div>
            <div class="col-lg-4 tw-text-end">
                <a href="{% url 'college_website:iqac' %}" class="btn tw-bg-gradient-to-r tw-from-blue-600 tw-to-purple-600 tw-text-white tw-border-0 tw-rounded-full tw-px-8 tw-py-4 tw-text-lg tw-font-semibold tw-transition-all tw-duration-300 hover:tw-shadow-lg hover:tw-scale-105">
                    <i class="fas fa-chart-line tw-mr-2"></i>Visit IQAC
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Enhanced filter button interactions
    document.querySelectorAll('a[href*="annual-reports"]').forEach(btn => {
        btn.addEventListener('click', function(e) {
            // Add loading state with modern animation
            const originalContent = this.innerHTML;
            this.innerHTML = '<i class="fas fa-spinner fa-spin tw-mr-2"></i>Loading...';
            this.style.pointerEvents = 'none';
            
            // Reset after a short delay (in case of slow loading)
            setTimeout(() => {
                this.innerHTML = originalContent;
                this.style.pointerEvents = 'auto';
            }, 2000);
        });
    });
    
    // Advanced scroll animations with Intersection Observer
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -100px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach((entry, index) => {
            if (entry.isIntersecting) {
                // Staggered animation for cards
                setTimeout(() => {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0) scale(1)';
                }, index * 100);
            }
        });
    }, observerOptions);
    
    // Observe all report cards with enhanced animations
    document.querySelectorAll('.card').forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(30px) scale(0.95)';
        card.style.transition = 'opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), transform 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
        observer.observe(card);
    });
    
    // Parallax effect for hero section
    window.addEventListener('scroll', function() {
        const scrolled = window.pageYOffset;
        const heroSection = document.querySelector('section');
        if (heroSection) {
            const rate = scrolled * -0.5;
            heroSection.style.transform = `translateY(${rate}px)`;
        }
    });
    
    // Enhanced hover effects for cards
    document.querySelectorAll('.card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-8px) scale(1.02)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });
    
    // Add ripple effect to buttons
    document.querySelectorAll('a[class*="btn"]').forEach(button => {
        button.addEventListener('click', function(e) {
            const ripple = document.createElement('span');
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.classList.add('ripple');
            
            this.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        });
    });
});

// Add CSS for ripple effect
const style = document.createElement('style');
style.textContent = `
    .ripple {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        transform: scale(0);
        animation: ripple-animation 0.6s linear;
        pointer-events: none;
    }
    
    @keyframes ripple-animation {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }
    
    a[class*="btn"] {
        position: relative;
        overflow: hidden;
    }
`;
document.head.appendChild(style);
</script>
{% endblock %}
