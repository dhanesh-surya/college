{% extends 'base.html' %}
{% load static %}

{% block title %}Extracurricular Events - {{ college_info.name|default:"Chaitanya Science and Arts College" }}{% endblock %}

{% block breadcrumb_items %}
<li class="breadcrumb-item active text-white">Extracurricular Events</li>
{% endblock %}

{% block content %}
<!-- Hero Section with Bootstrap 5 + Tailwind -->
<section class="tw-relative tw-overflow-hidden tw-py-20 tw-bg-gradient-to-br tw-from-purple-600 tw-via-pink-500 tw-to-red-500">
    <!-- Background Pattern -->
    <div class="tw-absolute tw-inset-0 tw-bg-black tw-bg-opacity-20"></div>
    <div class="tw-absolute tw-inset-0" style="background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><defs><pattern id=\"grain\" width=\"100\" height=\"100\" patternUnits=\"userSpaceOnUse\"><circle cx=\"25\" cy=\"25\" r=\"1\" fill=\"white\" opacity=\"0.1\"/><circle cx=\"75\" cy=\"75\" r=\"1\" fill=\"white\" opacity=\"0.1\"/></pattern></defs><rect width=\"100\" height=\"100\" fill=\"url(%23grain)\"/></svg>');"></div>
    
    <div class="container tw-relative tw-z-10">
        <div class="row align-items-center tw-min-h-96">
            <div class="col-lg-8">
                <div class="tw-text-white">
                    <!-- Animated Icon -->
                    <div class="tw-flex tw-items-center tw-mb-6">
                        <div class="tw-bg-white tw-bg-opacity-20 tw-p-4 tw-rounded-full tw-mr-4 tw-animate-bounce">
                            <i class="fas fa-theater-masks tw-text-4xl tw-text-yellow-300"></i>
                        </div>
                        <h1 class="tw-text-5xl lg:tw-text-6xl tw-font-bold tw-mb-0 tw-leading-tight">
                            Extracurricular Events
                        </h1>
                    </div>
                    
                    <p class="tw-text-xl lg:tw-text-2xl tw-mb-8 tw-opacity-90 tw-leading-relaxed">
                        Discover the vibrant world of extracurricular activities at our college. 
                        From cultural festivals to sports competitions, we celebrate talent, creativity, and teamwork.
                    </p>
                    
                    <!-- Feature Tags -->
                    <div class="tw-flex tw-flex-wrap tw-gap-4 tw-mb-8">
                        <div class="tw-bg-white tw-bg-opacity-20 tw-backdrop-blur-sm tw-px-4 tw-py-2 tw-rounded-full tw-flex tw-items-center">
                            <i class="fas fa-calendar-check tw-text-yellow-300 tw-mr-2"></i>
                            <span class="tw-font-medium">Regular Events</span>
                        </div>
                        <div class="tw-bg-white tw-bg-opacity-20 tw-backdrop-blur-sm tw-px-4 tw-py-2 tw-rounded-full tw-flex tw-items-center">
                            <i class="fas fa-users tw-text-yellow-300 tw-mr-2"></i>
                            <span class="tw-font-medium">Community Building</span>
                        </div>
                        <div class="tw-bg-white tw-bg-opacity-20 tw-backdrop-blur-sm tw-px-4 tw-py-2 tw-rounded-full tw-flex tw-items-center">
                            <i class="fas fa-star tw-text-yellow-300 tw-mr-2"></i>
                            <span class="tw-font-medium">Student Excellence</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Stats Cards -->
            <div class="col-lg-4">
                <div class="row g-3">
                    <div class="col-6">
                        <div class="tw-bg-white tw-bg-opacity-20 tw-backdrop-blur-sm tw-rounded-2xl tw-p-6 tw-text-center tw-text-white tw-shadow-lg">
                            <div class="tw-text-4xl tw-font-bold tw-mb-2 tw-text-yellow-300">{{ events|length }}</div>
                            <div class="tw-text-sm tw-opacity-90">Total Events</div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="tw-bg-white tw-bg-opacity-20 tw-backdrop-blur-sm tw-rounded-2xl tw-p-6 tw-text-center tw-text-white tw-shadow-lg">
                            <div class="tw-text-4xl tw-font-bold tw-mb-2 tw-text-yellow-300">12+</div>
                            <div class="tw-text-sm tw-opacity-90">Event Types</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Main Content -->
<div class="container tw-py-16">
    <!-- Filter Section -->
    <div class="tw-bg-white tw-rounded-3xl tw-shadow-xl tw-p-8 tw-mb-12 tw-border tw-border-gray-100">
        <div class="text-center tw-mb-8">
            <h3 class="tw-text-3xl tw-font-bold tw-text-gray-800 tw-mb-3">Browse by Category</h3>
            <p class="tw-text-gray-600 tw-text-lg">Filter events by type to find what interests you most</p>
        </div>
        
        <div class="tw-flex tw-flex-wrap tw-justify-center tw-gap-3">
            <a href="{% url 'college_website:extracurricular_events' %}" 
               class="tw-px-6 tw-py-3 tw-rounded-full tw-font-semibold tw-transition-all tw-duration-300 tw-flex tw-items-center {% if not request.GET.type %}tw-bg-gradient-to-r tw-from-purple-600 tw-to-pink-500 tw-text-white tw-shadow-lg{% else %}tw-bg-gray-100 tw-text-gray-700 hover:tw-bg-gray-200{% endif %}">
                <i class="fas fa-th-large tw-mr-2"></i>All Events
            </a>
            <a href="{% url 'college_website:extracurricular_events' %}?type=celebration" 
               class="tw-px-6 tw-py-3 tw-rounded-full tw-font-semibold tw-transition-all tw-duration-300 tw-flex tw-items-center {% if request.GET.type == 'celebration' %}tw-bg-gradient-to-r tw-from-purple-600 tw-to-pink-500 tw-text-white tw-shadow-lg{% else %}tw-bg-gray-100 tw-text-gray-700 hover:tw-bg-gray-200{% endif %}">
                <i class="fas fa-calendar-heart tw-mr-2"></i>Celebrations
            </a>
            <a href="{% url 'college_website:extracurricular_events' %}?type=foundation" 
               class="tw-px-6 tw-py-3 tw-rounded-full tw-font-semibold tw-transition-all tw-duration-300 tw-flex tw-items-center {% if request.GET.type == 'foundation' %}tw-bg-gradient-to-r tw-from-purple-600 tw-to-pink-500 tw-text-white tw-shadow-lg{% else %}tw-bg-gray-100 tw-text-gray-700 hover:tw-bg-gray-200{% endif %}">
                <i class="fas fa-building tw-mr-2"></i>Foundation Day
            </a>
            <a href="{% url 'college_website:extracurricular_events' %}?type=other" 
               class="tw-px-6 tw-py-3 tw-rounded-full tw-font-semibold tw-transition-all tw-duration-300 tw-flex tw-items-center {% if request.GET.type == 'other' %}tw-bg-gradient-to-r tw-from-purple-600 tw-to-pink-500 tw-text-white tw-shadow-lg{% else %}tw-bg-gray-100 tw-text-gray-700 hover:tw-bg-gray-200{% endif %}">
                <i class="fas fa-star tw-mr-2"></i>Other Events
            </a>
        </div>
    </div>

    <!-- Events Grid -->
    {% if events %}
    <div class="row g-4">
        {% for event in events %}
        <div class="col-lg-4 col-md-6">
            <div class="card tw-h-full tw-border-0 tw-shadow-lg tw-rounded-2xl tw-overflow-hidden tw-transition-all tw-duration-300 hover:tw-shadow-2xl hover:tw-scale-105">
                {% if event.banner_image %}
                <div class="tw-relative tw-overflow-hidden">
                    <img src="{{ event.banner_image.url }}" class="card-img-top tw-h-48 tw-object-cover tw-transition-transform tw-duration-300 hover:tw-scale-110" alt="{{ event.title }}">
                    <div class="tw-absolute tw-top-4 tw-right-4">
                        <span class="tw-bg-gradient-to-r tw-from-purple-600 tw-to-pink-500 tw-text-white tw-px-3 tw-py-1 tw-rounded-full tw-text-sm tw-font-semibold tw-shadow-lg">
                            {{ event.get_type_display }}
                        </span>
                    </div>
                </div>
                {% endif %}
                
                <div class="card-body tw-p-6 tw-flex tw-flex-col tw-h-full">
                    <!-- Date Badge -->
                    <div class="tw-bg-gradient-to-r tw-from-blue-500 tw-to-purple-600 tw-text-white tw-px-4 tw-py-2 tw-rounded-full tw-text-sm tw-font-semibold tw-inline-block tw-mb-4 tw-w-fit">
                        <i class="fas fa-calendar-alt tw-mr-2"></i>
                        {{ event.date|date:"M d, Y" }}
                    </div>
                    
                    <!-- Title -->
                    <h5 class="tw-text-xl tw-font-bold tw-text-gray-800 tw-mb-3 tw-leading-tight">{{ event.title }}</h5>
                    
                    <!-- Description -->
                    {% if event.description %}
                    <p class="tw-text-gray-600 tw-mb-4 tw-leading-relaxed tw-flex-grow">
                        {{ event.description|striptags|truncatewords:20 }}
                    </p>
                    {% endif %}
                    
                    <!-- Meta Information -->
                    <div class="tw-space-y-2 tw-mb-6">
                        {% if event.location %}
                        <div class="tw-flex tw-items-center tw-text-gray-600">
                            <i class="fas fa-map-marker-alt tw-text-red-500 tw-w-4 tw-mr-3"></i>
                            <span class="tw-text-sm">{{ event.location }}</span>
                        </div>
                        {% endif %}
                        
                        {% if event.time %}
                        <div class="tw-flex tw-items-center tw-text-gray-600">
                            <i class="fas fa-clock tw-text-blue-500 tw-w-4 tw-mr-3"></i>
                            <span class="tw-text-sm">{{ event.time|time:"g:i A" }}</span>
                        </div>
                        {% endif %}
                        
                        {% if event.organizer %}
                        <div class="tw-flex tw-items-center tw-text-gray-600">
                            <i class="fas fa-user-tie tw-text-green-500 tw-w-4 tw-mr-3"></i>
                            <span class="tw-text-sm">{{ event.organizer }}</span>
                        </div>
                        {% endif %}
                    </div>
                    
                    <!-- Action Button -->
                    <div class="tw-mt-auto">
                        <a href="{% url 'college_website:event_detail' event.id %}" 
                           class="btn tw-w-full tw-bg-gradient-to-r tw-from-purple-600 tw-to-pink-500 tw-text-white tw-border-0 tw-rounded-full tw-py-3 tw-font-semibold tw-transition-all tw-duration-300 hover:tw-shadow-lg hover:tw-scale-105">
                            <i class="fas fa-eye tw-mr-2"></i>View Details
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    
    <!-- Pagination -->
    {% if events.has_other_pages %}
    <div class="tw-flex tw-justify-center tw-mt-12">
        <nav aria-label="Events pagination">
            <ul class="pagination tw-shadow-lg tw-rounded-full tw-overflow-hidden">
                {% if events.has_previous %}
                <li class="page-item">
                    <a class="page-link tw-border-0 tw-px-4 tw-py-2 tw-bg-gray-100 tw-text-gray-700 hover:tw-bg-purple-600 hover:tw-text-white tw-transition-all tw-duration-300" 
                       href="?page={{ events.previous_page_number }}{% if request.GET.type %}&type={{ request.GET.type }}{% endif %}">
                        <i class="fas fa-chevron-left tw-mr-1"></i>Previous
                    </a>
                </li>
                {% endif %}
                
                {% for num in events.paginator.page_range %}
                {% if events.number == num %}
                <li class="page-item active">
                    <span class="page-link tw-border-0 tw-px-4 tw-py-2 tw-bg-gradient-to-r tw-from-purple-600 tw-to-pink-500 tw-text-white">{{ num }}</span>
                </li>
                {% elif num > events.number|add:'-3' and num < events.number|add:'3' %}
                <li class="page-item">
                    <a class="page-link tw-border-0 tw-px-4 tw-py-2 tw-bg-gray-100 tw-text-gray-700 hover:tw-bg-purple-600 hover:tw-text-white tw-transition-all tw-duration-300" 
                       href="?page={{ num }}{% if request.GET.type %}&type={{ request.GET.type }}{% endif %}">{{ num }}</a>
                </li>
                {% endif %}
                {% endfor %}
                
                {% if events.has_next %}
                <li class="page-item">
                    <a class="page-link tw-border-0 tw-px-4 tw-py-2 tw-bg-gray-100 tw-text-gray-700 hover:tw-bg-purple-600 hover:tw-text-white tw-transition-all tw-duration-300" 
                       href="?page={{ events.next_page_number }}{% if request.GET.type %}&type={{ request.GET.type }}{% endif %}">
                        Next<i class="fas fa-chevron-right tw-ml-1"></i>
                    </a>
                </li>
                {% endif %}
            </ul>
        </nav>
    </div>
    {% endif %}
    
    {% else %}
    <!-- No Events Message -->
    <div class="tw-text-center tw-py-16">
        <div class="tw-bg-gray-100 tw-w-24 tw-h-24 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-mx-auto tw-mb-6">
            <i class="fas fa-calendar-times tw-text-4xl tw-text-gray-400"></i>
        </div>
        <h3 class="tw-text-3xl tw-font-bold tw-text-gray-800 tw-mb-4">No Extracurricular Events Available</h3>
        <p class="tw-text-xl tw-text-gray-600 tw-mb-8 tw-max-w-2xl tw-mx-auto">
            We're currently planning exciting extracurricular activities. 
            Check back soon for updates on upcoming events!
        </p>
        <a href="{% url 'college_website:events' %}" class="btn tw-bg-gradient-to-r tw-from-purple-600 tw-to-pink-500 tw-text-white tw-border-0 tw-rounded-full tw-px-8 tw-py-4 tw-text-lg tw-font-semibold tw-transition-all tw-duration-300 hover:tw-shadow-lg hover:tw-scale-105">
            <i class="fas fa-calendar-alt tw-mr-2"></i>View All Events
        </a>
    </div>
    {% endif %}
</div>

<!-- Call to Action Section -->
<section class="tw-py-16 tw-bg-gradient-to-r tw-from-gray-50 tw-to-blue-50">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h3 class="tw-text-3xl tw-font-bold tw-text-gray-800 tw-mb-4">Want to Organize an Event?</h3>
                <p class="tw-text-lg tw-text-gray-600 tw-mb-0">
                    Students and faculty can propose new extracurricular events. 
                    Contact the student council or event committee to get started.
                </p>
            </div>
            <div class="col-lg-4 tw-text-end">
                <a href="{% url 'college_website:contact' %}" class="btn tw-bg-gradient-to-r tw-from-purple-600 tw-to-pink-500 tw-text-white tw-border-0 tw-rounded-full tw-px-8 tw-py-4 tw-text-lg tw-font-semibold tw-transition-all tw-duration-300 hover:tw-shadow-lg hover:tw-scale-105">
                    <i class="fas fa-envelope tw-mr-2"></i>Contact Us
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Enhanced filter button interactions
    document.querySelectorAll('a[href*="extracurricular-events"]').forEach(btn => {
        btn.addEventListener('click', function(e) {
            // Add loading state with modern animation
            const originalContent = this.innerHTML;
            this.innerHTML = '<i class="fas fa-spinner fa-spin tw-mr-2"></i>Loading...';
            this.style.pointerEvents = 'none';
            
            // Reset after a short delay (in case of slow loading)
            setTimeout(() => {
                this.innerHTML = originalContent;
                this.style.pointerEvents = 'auto';
            }, 2000);
        });
    });
    
    // Advanced scroll animations with Intersection Observer
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -100px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach((entry, index) => {
            if (entry.isIntersecting) {
                // Staggered animation for cards
                setTimeout(() => {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0) scale(1)';
                }, index * 100);
            }
        });
    }, observerOptions);
    
    // Observe all event cards with enhanced animations
    document.querySelectorAll('.card').forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(30px) scale(0.95)';
        card.style.transition = 'opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), transform 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
        observer.observe(card);
    });
    
    // Parallax effect for hero section
    window.addEventListener('scroll', function() {
        const scrolled = window.pageYOffset;
        const heroSection = document.querySelector('section');
        if (heroSection) {
            const rate = scrolled * -0.5;
            heroSection.style.transform = `translateY(${rate}px)`;
        }
    });
    
    // Enhanced hover effects for cards
    document.querySelectorAll('.card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-8px) scale(1.02)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });
    
    // Smooth scroll for pagination
    document.querySelectorAll('.pagination a').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const href = this.getAttribute('href');
            
            // Add loading state
            this.innerHTML = '<i class="fas fa-spinner fa-spin tw-mr-1"></i>Loading...';
            
            // Navigate after animation
            setTimeout(() => {
                window.location.href = href;
            }, 300);
        });
    });
    
    // Add ripple effect to buttons
    document.querySelectorAll('a[class*="btn"]').forEach(button => {
        button.addEventListener('click', function(e) {
            const ripple = document.createElement('span');
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.classList.add('ripple');
            
            this.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        });
    });
});

// Add CSS for ripple effect
const style = document.createElement('style');
style.textContent = `
    .ripple {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        transform: scale(0);
        animation: ripple-animation 0.6s linear;
        pointer-events: none;
    }
    
    @keyframes ripple-animation {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }
    
    a[class*="btn"] {
        position: relative;
        overflow: hidden;
    }
`;
document.head.appendChild(style);
</script>
{% endblock %}
