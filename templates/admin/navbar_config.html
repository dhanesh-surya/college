{% extends "admin/base_site.html" %}
{% load static %}
{% load navbar_tags %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">Home</a>
    &rsaquo; {{ title }}
</div>
{% endblock %}

{% block content %}
<div class="navbar-config-container">
    <h1>{{ title }}</h1>
    
    <div class="navbar-config-actions">
        <a href="{% url 'admin:college_website_navbarinfo_changelist' %}" class="btn btn-secondary">
            <i class="fas fa-list"></i> View All Configurations
        </a>
        <a href="{% url 'navbar_preview' %}" class="btn btn-info" target="_blank">
            <i class="fas fa-eye"></i> Preview Navbar
        </a>
        <form method="post" action="{% url 'navbar_config_reset' %}" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-warning" onclick="return confirm('Are you sure you want to reset to defaults?')">
                <i class="fas fa-undo"></i> Reset to Defaults
            </button>
        </form>
    </div>

    <div class="navbar-config-form">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <div class="form-sections">
                <!-- Brand Information -->
                <div class="form-section">
                    <h3><i class="fas fa-building"></i> Brand Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.brand_name.id_for_label }}">{{ form.brand_name.label }}</label>
                            {{ form.brand_name }}
                            {% if form.brand_name.help_text %}
                                <small class="form-text text-muted">{{ form.brand_name.help_text }}</small>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.brand_subtitle.id_for_label }}">{{ form.brand_subtitle.label }}</label>
                            {{ form.brand_subtitle }}
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.logo.id_for_label }}">{{ form.logo.label }}</label>
                            {{ form.logo }}
                        </div>
                        <div class="form-group">
                            <div class="form-check">
                                {{ form.show_logo }}
                                <label class="form-check-label" for="{{ form.show_logo.id_for_label }}">
                                    {{ form.show_logo.label }}
                                </label>
                            </div>
                            <div class="form-check">
                                {{ form.show_brand_text }}
                                <label class="form-check-label" for="{{ form.show_brand_text.id_for_label }}">
                                    {{ form.show_brand_text.label }}
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navbar Dimensions & Spacing -->
                <div class="form-section">
                    <h3><i class="fas fa-ruler"></i> Navbar Dimensions & Spacing</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.navbar_height.id_for_label }}">{{ form.navbar_height.label }}</label>
                            {{ form.navbar_height }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.navbar_padding_top.id_for_label }}">{{ form.navbar_padding_top.label }}</label>
                            {{ form.navbar_padding_top }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.navbar_padding_bottom.id_for_label }}">{{ form.navbar_padding_bottom.label }}</label>
                            {{ form.navbar_padding_bottom }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.navbar_padding_horizontal.id_for_label }}">{{ form.navbar_padding_horizontal.label }}</label>
                            {{ form.navbar_padding_horizontal }}
                        </div>
                    </div>
                </div>

                <!-- Typography & Logo -->
                <div class="form-section">
                    <h3><i class="fas fa-font"></i> Typography & Logo</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.brand_font_size.id_for_label }}">{{ form.brand_font_size.label }}</label>
                            {{ form.brand_font_size }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.menu_font_size.id_for_label }}">{{ form.menu_font_size.label }}</label>
                            {{ form.menu_font_size }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.menu_line_height.id_for_label }}">{{ form.menu_line_height.label }}</label>
                            {{ form.menu_line_height }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.logo_height.id_for_label }}">{{ form.logo_height.label }}</label>
                            {{ form.logo_height }}
                        </div>
                    </div>
                </div>

                <!-- Colors & Styling -->
                <div class="form-section">
                    <h3><i class="fas fa-palette"></i> Colors & Styling</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.navbar_background_color.id_for_label }}">{{ form.navbar_background_color.label }}</label>
                            {{ form.navbar_background_color }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.navbar_text_color.id_for_label }}">{{ form.navbar_text_color.label }}</label>
                            {{ form.navbar_text_color }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.navbar_hover_color.id_for_label }}">{{ form.navbar_hover_color.label }}</label>
                            {{ form.navbar_hover_color }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.navbar_border_color.id_for_label }}">{{ form.navbar_border_color.label }}</label>
                            {{ form.navbar_border_color }}
                        </div>
                    </div>
                </div>

                <!-- Navigation Behavior -->
                <div class="form-section">
                    <h3><i class="fas fa-cog"></i> Navigation Behavior</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <div class="form-check">
                                {{ form.is_sticky }}
                                <label class="form-check-label" for="{{ form.is_sticky.id_for_label }}">
                                    {{ form.is_sticky.label }}
                                </label>
                            </div>
                            <div class="form-check">
                                {{ form.show_below_header }}
                                <label class="form-check-label" for="{{ form.show_below_header.id_for_label }}">
                                    {{ form.show_below_header.label }}
                                </label>
                            </div>
                            <div class="form-check">
                                {{ form.enable_search }}
                                <label class="form-check-label" for="{{ form.enable_search.id_for_label }}">
                                    {{ form.enable_search.label }}
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="{{ form.search_placeholder.id_for_label }}">{{ form.search_placeholder.label }}</label>
                            {{ form.search_placeholder }}
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Save Configuration
                </button>
                <a href="{% url 'admin:index' %}" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Cancel
                </a>
            </div>
        </form>
    </div>
</div>

<style>
.navbar-config-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.navbar-config-actions {
    margin-bottom: 30px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.navbar-config-actions .btn {
    display: inline-flex;
    align-items: center;
    gap: 5px;
}

.form-sections {
    display: grid;
    gap: 30px;
}

.form-section {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #dee2e6;
}

.form-section h3 {
    margin-bottom: 20px;
    color: #495057;
    display: flex;
    align-items: center;
    gap: 10px;
}

.form-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
}

.form-group {
    display: flex;
    flex-direction: column;
}

.form-group label {
    font-weight: 600;
    margin-bottom: 5px;
    color: #495057;
}

.form-group input,
.form-group select {
    padding: 8px 12px;
    border: 1px solid #ced4da;
    border-radius: 4px;
    font-size: 14px;
}

.form-group input[type="color"] {
    width: 60px;
    height: 40px;
    padding: 2px;
}

.form-check {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 10px;
}

.form-check input[type="checkbox"] {
    margin: 0;
}

.form-actions {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid #dee2e6;
    display: flex;
    gap: 10px;
}

.form-actions .btn {
    display: inline-flex;
    align-items: center;
    gap: 5px;
}

@media (max-width: 768px) {
    .form-row {
        grid-template-columns: 1fr;
    }
    
    .navbar-config-actions {
        flex-direction: column;
    }
    
    .form-actions {
        flex-direction: column;
    }
}
</style>
{% endblock %}
